<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Etaria.net â€“ Masterplan</title>
<link href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&family=Outfit:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
<script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore-compat.js"></script>
<style>
:root{--bg:#06080a;--surface:#0a0d12;--card:#0e1117;--border:#1a1f2e;--border-h:#252d3d;--amber:#f5a623;--amber-g:linear-gradient(135deg,#f5a623,#e8720c);--red:#ef4444;--blue:#3b82f6;--green:#10b981;--purple:#a855f7;--cyan:#06b6d4;--text:#e4e8f1;--text-m:#8492a6;--text-d:#4a5568;--radius:8px}
*{margin:0;padding:0;box-sizing:border-box}body{background:var(--bg);color:var(--text);font-family:'Outfit',sans-serif;line-height:1.6}
::-webkit-scrollbar{width:5px}::-webkit-scrollbar-thumb{background:var(--border-h);border-radius:3px}
.lo{position:fixed;inset:0;z-index:9999;background:var(--bg);display:flex;align-items:center;justify-content:center}.lo.h{display:none}
.lo-box{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:2rem;width:320px;text-align:center}
.lo-logo{font-family:'Space Mono',monospace;font-size:1.3rem;font-weight:700;color:var(--amber);margin-bottom:1.2rem}
.lo-input{width:100%;padding:.6rem .8rem;background:var(--surface);border:1px solid var(--border);border-radius:6px;color:var(--text);font-size:.8rem;margin-bottom:.6rem;outline:none}.lo-input:focus{border-color:var(--amber)}
.lo-btn{width:100%;padding:.65rem;background:var(--amber-g);border:none;border-radius:6px;color:#000;font-weight:700;font-size:.8rem;cursor:pointer;margin-top:.3rem}.lo-btn:hover{opacity:.9}.lo-btn:disabled{opacity:.5}
.lo-err{color:var(--red);font-size:.65rem;margin-top:.4rem;min-height:.9rem}
.lo-guest{color:var(--text-d);font-size:.65rem;margin-top:.8rem;cursor:pointer}.lo-guest:hover{color:var(--text-m)}
.top{position:fixed;top:0;left:0;right:0;z-index:500;background:rgba(6,8,10,.92);backdrop-filter:blur(10px);border-bottom:1px solid var(--border);height:46px;padding:0 1rem;display:flex;align-items:center;justify-content:space-between}
.top-logo{font-family:'Space Mono',monospace;font-size:.85rem;font-weight:700;color:var(--amber)}
.top-badge{font-family:'Space Mono',monospace;font-size:.48rem;padding:.12em .45em;border-radius:3px;margin-left:.4rem;border:1px solid}.top-badge.admin{color:var(--amber);border-color:rgba(245,166,35,.3);background:rgba(245,166,35,.08)}.top-badge.guest{color:var(--text-d);border-color:var(--border)}
.top-r{display:flex;align-items:center;gap:.5rem}
.top-btn{font-size:.62rem;padding:.3rem .6rem;border-radius:4px;border:1px solid var(--border);background:var(--surface);color:var(--text-m);cursor:pointer}.top-btn:hover{border-color:var(--amber);color:var(--text)}
.edit-bar{position:fixed;bottom:0;left:0;right:0;z-index:500;background:rgba(245,166,35,.08);border-top:2px solid var(--amber);padding:.45rem;display:none;justify-content:center;align-items:center;gap:.6rem}.edit-bar.show{display:flex}
.edit-bar span{font-family:'Space Mono',monospace;font-size:.62rem;color:var(--amber)}
.app{max-width:880px;margin:0 auto;padding:62px 1rem 3.5rem}
.hero{text-align:center;padding:1.2rem 0 .8rem}.hero h1{font-size:1.5rem;font-weight:900;background:linear-gradient(135deg,#fff 30%,var(--amber));-webkit-background-clip:text;-webkit-text-fill-color:transparent}.hero p{color:var(--text-d);font-size:.68rem;margin-top:.2rem}
.nav{position:sticky;top:46px;z-index:100;background:rgba(6,8,10,.95);border-bottom:1px solid var(--border);margin:0 -1rem;padding:0 1rem;display:flex;overflow-x:auto;-ms-overflow-style:none;scrollbar-width:none}.nav::-webkit-scrollbar{display:none}
.nav-btn{font-size:.65rem;font-weight:600;color:var(--text-d);background:none;border:none;padding:.65rem .8rem;cursor:pointer;white-space:nowrap;border-bottom:2px solid transparent;transition:.15s}.nav-btn:hover{color:var(--text-m)}.nav-btn.on{color:var(--amber);border-color:var(--amber)}
.prog{background:var(--card);border:1px solid var(--border);border-radius:var(--radius);padding:.7rem .9rem;margin:.8rem 0}
.prog-top{display:flex;justify-content:space-between;align-items:center;margin-bottom:.35rem}.prog-top span{font-size:.65rem}.prog-pct{font-family:'Space Mono',monospace;color:var(--amber);font-weight:700}
.prog-bar{height:4px;background:var(--surface);border-radius:2px;overflow:hidden}.prog-fill{height:100%;background:var(--amber-g);transition:width .4s}
.prog-info{font-family:'Space Mono',monospace;font-size:.5rem;color:var(--text-d);margin-top:.25rem}
.sec{display:none;margin-top:.8rem}.sec.on{display:block}
.sec-title{font-size:.82rem;font-weight:800;margin-bottom:.4rem;display:flex;align-items:center;gap:.4rem}
.sec-desc{font-size:.68rem;color:var(--text-m);margin-bottom:.7rem;line-height:1.55}
/* Steps */
.step{background:var(--card);border:1px solid var(--border);border-radius:var(--radius);margin-bottom:.45rem;overflow:hidden;transition:.15s}.step:hover{border-color:var(--border-h)}.step.done{opacity:.4}.step.done .step-n{background:var(--green);color:#000}
.step-h{display:flex;align-items:center;gap:.55rem;padding:.7rem;cursor:pointer}
.step-n{width:22px;height:22px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-family:'Space Mono',monospace;font-size:.58rem;font-weight:700;flex-shrink:0}
.step-n.krit{background:var(--red);color:#fff}.step-n.hoch{background:var(--amber);color:#000}.step-n.med{background:var(--blue);color:#fff}.step-n.low{background:var(--text-d);color:#fff}
.step-info{flex:1;min-width:0}.step-t{font-size:.75rem;font-weight:700}.step-c{font-family:'Space Mono',monospace;font-size:.48rem;color:var(--text-d)}
.step-chk{width:17px;height:17px;border:2px solid var(--border-h);border-radius:3px;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:.48rem;flex-shrink:0;transition:.15s}.step-chk:hover{border-color:var(--amber)}.step-chk.on{background:var(--green);border-color:var(--green);color:#000}
.step-del{width:17px;height:17px;border-radius:50%;border:1px solid var(--border);background:var(--surface);color:var(--text-d);font-size:.45rem;cursor:pointer;display:none;align-items:center;justify-content:center;margin-left:.2rem;transition:.15s}.step-del:hover{border-color:var(--red);color:var(--red)}
body.edit .step-del{display:flex}
.step-arr{font-size:.48rem;color:var(--text-d);margin-left:.15rem}
.step-body{max-height:0;overflow:hidden;transition:max-height .25s}.step-body.open{max-height:800px}
.step-content{padding:0 .7rem .7rem;border-top:1px solid var(--border)}
.step-why{background:rgba(239,68,68,.06);border:1px solid rgba(239,68,68,.12);border-radius:5px;padding:.45rem .6rem;margin:.55rem 0}
.step-why b{font-size:.5rem;color:var(--red);display:block;margin-bottom:.15rem}
.step-why p{font-size:.64rem;color:var(--text-m);line-height:1.5}
.step-todo{background:var(--surface);border-radius:5px;padding:.55rem .65rem}
.step-todo b{font-size:.5rem;color:var(--green);display:block;margin-bottom:.3rem}
.todo-i{font-size:.64rem;color:var(--text);padding:.18rem 0;display:flex;gap:.35rem;line-height:1.45}.todo-i::before{content:'â†’';color:var(--amber);font-weight:700}
.step-connect{background:rgba(59,130,246,.06);border:1px solid rgba(59,130,246,.12);border-radius:5px;padding:.45rem .6rem;margin-top:.55rem}
.step-connect b{font-size:.5rem;color:var(--blue);display:block;margin-bottom:.15rem}
.step-connect p{font-size:.64rem;color:var(--text-m);line-height:1.5}
/* Cards */
.card{background:var(--card);border:1px solid var(--border);border-radius:var(--radius);padding:.7rem;margin-bottom:.4rem;transition:.15s}.card:hover{border-color:var(--border-h)}
.card-h{display:flex;align-items:center;gap:.35rem;margin-bottom:.2rem}.card-h span{font-size:.95rem}.card-h h4{font-size:.72rem;font-weight:700}
.card p{font-size:.64rem;color:var(--text-m);line-height:1.45}
.badge{font-family:'Space Mono',monospace;font-size:.44rem;padding:.08em .3em;border-radius:3px;margin-left:.2rem}
.badge.ok{background:rgba(16,185,129,.1);color:var(--green);border:1px solid rgba(16,185,129,.2)}
.badge.warn{background:rgba(245,166,35,.08);color:var(--amber);border:1px solid rgba(245,166,35,.2)}
.badge.bad{background:rgba(239,68,68,.08);color:var(--red);border:1px solid rgba(239,68,68,.2)}
.tags{display:flex;flex-wrap:wrap;gap:.2rem;margin-top:.35rem}
.tag{font-family:'Space Mono',monospace;font-size:.44rem;padding:.1em .32em;border-radius:3px;border:1px solid var(--border);color:var(--text-d)}
.tag.ok{color:var(--green);border-color:rgba(16,185,129,.25)}
.tag.bad{color:var(--red);border-color:rgba(239,68,68,.25)}
/* Tables */
.tbl{background:var(--card);border:1px solid var(--border);border-radius:var(--radius);overflow:hidden;margin-bottom:.6rem}
.tbl-h{background:var(--surface);padding:.4rem .7rem;font-size:.6rem;font-weight:700;border-bottom:1px solid var(--border);display:flex;justify-content:space-between;align-items:center}
.tbl-h span{color:var(--text-d);font-weight:400}
.tbl-r{display:flex;align-items:center;padding:.35rem .7rem;border-bottom:1px solid var(--border);font-size:.62rem}.tbl-r:last-child{border:none}
.tbl-r:hover{background:rgba(255,255,255,.01)}
.tbl-item{flex:1}.tbl-val{font-family:'Space Mono',monospace;color:var(--green);font-weight:600;min-width:75px;text-align:right}.tbl-note{color:var(--text-d);font-size:.55rem;min-width:70px;text-align:right}
/* Timeline */
.tl{padding-left:1.5rem;position:relative}.tl::before{content:'';position:absolute;left:7px;top:0;bottom:0;width:2px;background:linear-gradient(var(--amber),var(--border))}
.ph{position:relative;margin-bottom:.6rem}
.ph-dot{position:absolute;left:-1.5rem;top:.55rem;width:16px;height:16px;border-radius:50%;border:2px solid var(--border);background:var(--bg);display:flex;align-items:center;justify-content:center;font-family:'Space Mono',monospace;font-size:.42rem;font-weight:700}
.ph.done .ph-dot{background:var(--green);border-color:var(--green);color:#000}
.ph-card{background:var(--card);border:1px solid var(--border);border-radius:var(--radius);padding:.65rem}
.ph-top{display:flex;justify-content:space-between;align-items:center;margin-bottom:.15rem}
.ph-t{font-size:.72rem;font-weight:700}
.ph-time{font-family:'Space Mono',monospace;font-size:.46rem;color:var(--text-d);background:var(--surface);padding:.1em .35em;border-radius:3px}
.ph-goal{font-size:.6rem;color:var(--amber);font-weight:600;margin-bottom:.3rem}
.ph-text{font-size:.62rem;color:var(--text-m);line-height:1.45;margin-bottom:.4rem}
.pchk{display:flex;align-items:center;gap:.28rem;font-size:.58rem;color:var(--text-m);cursor:pointer;padding:.1rem 0;transition:.1s}.pchk:hover{color:var(--text)}.pchk.on{color:var(--text-d);text-decoration:line-through}
.pchk-box{width:12px;height:12px;border:1.5px solid var(--border-h);border-radius:3px;display:flex;align-items:center;justify-content:center;font-size:.4rem;flex-shrink:0}.pchk.on .pchk-box{background:var(--green);border-color:var(--green);color:#000}
/* Info boxes */
.info{background:rgba(59,130,246,.05);border:1px solid rgba(59,130,246,.1);border-radius:6px;padding:.5rem .65rem;margin-bottom:.6rem}
.info p{font-size:.62rem;color:var(--text-m);line-height:1.5}
.info b{color:var(--blue)}
.warn-box{background:rgba(239,68,68,.05);border:1px solid rgba(239,68,68,.1);border-radius:6px;padding:.5rem .65rem;margin-bottom:.6rem}
.warn-box p{font-size:.62rem;color:var(--text-m);line-height:1.5}
.warn-box b{color:var(--red)}
/* Crafting display */
.craft{background:var(--surface);border-radius:6px;padding:.55rem .7rem;margin-top:.5rem}
.craft-title{font-size:.55rem;font-weight:700;color:var(--cyan);margin-bottom:.35rem}
.craft-recipe{display:flex;flex-wrap:wrap;gap:.3rem;align-items:center;font-size:.58rem;color:var(--text-m)}
.craft-item{background:var(--card);border:1px solid var(--border);border-radius:4px;padding:.15rem .4rem;font-family:'Space Mono',monospace;font-size:.52rem}
.craft-arrow{color:var(--amber);font-weight:700}
.craft-result{background:rgba(245,166,35,.1);border:1px solid rgba(245,166,35,.25);border-radius:4px;padding:.15rem .5rem;font-family:'Space Mono',monospace;font-size:.52rem;color:var(--amber);font-weight:600}
/* System flow */
.flow{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:.4rem;margin:.5rem 0}
.flow-box{background:var(--surface);border:1px solid var(--border);border-radius:6px;padding:.5rem;text-align:center}
.flow-icon{font-size:1.1rem;margin-bottom:.2rem}
.flow-title{font-size:.58rem;font-weight:700;margin-bottom:.15rem}
.flow-desc{font-size:.5rem;color:var(--text-d);line-height:1.4}
.flow-arrow{display:flex;align-items:center;justify-content:center;color:var(--amber);font-size:.7rem}
/* Toast */
.toast{position:fixed;bottom:55px;left:50%;transform:translateX(-50%) translateY(15px);background:var(--green);color:#000;font-family:'Space Mono',monospace;font-size:.58rem;font-weight:700;padding:.35rem .8rem;border-radius:5px;opacity:0;transition:.25s;z-index:600}.toast.show{opacity:1;transform:translateX(-50%) translateY(0)}.toast.err{background:var(--red);color:#fff}
.spinner{width:11px;height:11px;border:2px solid var(--text-d);border-top-color:var(--amber);border-radius:50%;animation:spin .5s linear infinite;display:inline-block}
@keyframes spin{to{transform:rotate(360deg)}}
.dot{width:5px;height:5px;border-radius:50%;background:var(--green);display:inline-block;margin-right:.15rem}
@media(max-width:600px){.app{padding:58px .7rem 3rem}.step-h{padding:.6rem}.nav-btn{padding:.55rem .6rem;font-size:.6rem}}
</style>
</head>
<body>
<div class="lo" id="lo">
<div class="lo-box">
<div class="lo-logo">ETARIA MASTERPLAN</div>
<input class="lo-input" id="le" placeholder="E-Mail">
<input class="lo-input" id="lp" type="password" placeholder="Passwort">
<button class="lo-btn" id="lb" onclick="login()">Anmelden</button>
<div class="lo-err" id="lerr"></div>
<div class="lo-guest" onclick="guest()">Als Gast ansehen â†’</div>
</div>
</div>

<div class="top" id="top" style="display:none">
<div style="display:flex;align-items:center">
<span class="top-logo">ETARIA</span>
<span class="top-badge" id="badge">ADMIN</span>
<span id="sync" style="margin-left:.35rem"></span>
</div>
<div class="top-r">
<button class="top-btn" id="ebtn" onclick="toggleEdit()">âœï¸ Edit</button>
<button class="top-btn" onclick="logout()">Logout</button>
</div>
</div>

<div class="edit-bar" id="ebar">
<span>âœï¸ EDIT MODE â€“ Klicke âœ• zum LÃ¶schen</span>
<button class="top-btn" onclick="toggleEdit()">Fertig</button>
</div>

<div class="toast" id="toast"></div>

<div class="app" id="app" style="display:none">
<header class="hero">
<h1>Etaria Masterplan</h1>
<p>Durchdachtes System fÃ¼r Spielerbindung</p>
</header>

<nav class="nav">
<button class="nav-btn on" data-t="leitfaden">ğŸ“‹ Jetzt umsetzen</button>
<button class="nav-btn" data-t="systeme">âš™ï¸ Systeme</button>
<button class="nav-btn" data-t="preise">ğŸ’° Wirtschaft</button>
<button class="nav-btn" data-t="zukunft">ğŸ”® Zukunft</button>
<button class="nav-btn" data-t="reise">ğŸ—ºï¸ Spielerreise</button>
<button class="nav-btn" data-t="status">ğŸ“Š Status</button>
</nav>

<div class="prog">
<div class="prog-top">
<span>Fortschritt</span>
<span class="prog-pct" id="pct">0%</span>
</div>
<div class="prog-bar"><div class="prog-fill" id="fill"></div></div>
<div class="prog-info"><span id="pdone">0</span> / <span id="ptotal">0</span> erledigt</div>
</div>

<div id="root"></div>
</div>

<script>
firebase.initializeApp({apiKey:"AIzaSyD9VRhfeOiCT3hgPw1rSi59CM3IZpvd-c8",authDomain:"etaria-masterplan.firebaseapp.com",projectId:"etaria-masterplan"});
const auth=firebase.auth(),db=firebase.firestore(),$=id=>document.getElementById(id);

let user=null,admin=false,edit=false,tab='leitfaden';
let S={done:{},checks:{},open:{},del:[]};

// =====================================================
// LEITFADEN - Sofort umsetzen
// =====================================================
const LEIT=[
{id:"l1",n:1,p:"krit",t:"Starthaus-Plugin deaktivieren",c:"Server Â· Sofort",
why:"Das Starthaus spaltet deinen Server in zwei Welten. Spieler haben keinen Grund, in die Survival-Welt zu gehen. Sie bauen im Starthaus, farmen im Starthaus, interagieren mit niemandem. Das ist der Hauptgrund warum nach ein paar Tagen keiner mehr spielt.",
todo:["Server stoppen","starthaus-1.0.jar in /plugins umbenennen zu starthaus-1.0.jar.disabled","Server neu starten","Testen: Neuer Spieler spawnt direkt in Survival-Welt"],
connect:"Ohne Starthaus mÃ¼ssen Spieler in der echten Welt bauen â†’ brauchen Claims â†’ brauchen Geld â†’ mÃ¼ssen Jobs machen â†’ interagieren mit anderen."
},
{id:"l2",n:2,p:"krit",t:"Munitions-Beschaffung fÃ¼r Spieler",c:"Wirtschaft Â· Sofort",
why:"Du hast 21 Waffen, aber Spieler kÃ¶nnen keine Munition bekommen. Das gesamte Waffensystem ist fÃ¼r Spieler nutzlos. Bei 200-300$/h Verdienst mÃ¼ssen Preise niedrig sein.",
todo:["NPC 'MunitionshÃ¤ndler' am Spawn erstellen","Preise: Pistole 0.50$/Mag, SMG 1$, Gewehr 2$, Shotgun 1.50$, Sniper 5$, RPG 25$","Alternativ: Muni als seltener Drop von Zombies (5-10%)","Muni NICHT Ã¼ber /give, nur Ã¼ber Shop oder Drops"],
connect:"Muni kostet Geld â†’ Spieler mÃ¼ssen farmen â†’ Jobs werden wichtig â†’ Kills haben Kosten (Muni-Verbrauch) â†’ PvP wird taktischer."
},
{id:"l3",n:3,p:"krit",t:"Kill-Belohnungen einrichten",c:"PvP Â· Sofort",
why:"Aktuell ist PvP reines Griefing. Der Killer gewinnt nichts auÃŸer Frust beim Opfer. Kein Anreiz, kein Risiko, keine Spannung.",
todo:["Kill-Reward: 20% vom Bargeld des Opfers (nicht generiert, umverteilt)","Bonus: ZufÃ¤lliges Item aus Opfer-Inventar (10% Chance pro Slot)","Anti-Abuse: Gleicher Spieler erst nach 2 Stunden wieder lootbar","Unter 50$ Bargeld: Kein Geld-Loot (verhindert Nackt-Farming)","Kill-Nachricht im Chat mit Betrag"],
connect:"Kills lohnen sich â†’ Spieler tragen Geld bei sich â†’ Risiko beim Reisen â†’ Waffen/Muni werden wertvoller â†’ Clans bieten Schutz."
},
{id:"l4",n:4,p:"krit",t:"Waffen-Reparatur ermÃ¶glichen",c:"Wirtschaft Â· Sofort",
why:"Waffen verlieren Durability, aber Spieler kÃ¶nnen sie nicht reparieren. Irgendwann ist jede Waffe Schrott. Frustrierend.",
todo:["Reparatur-Kits als craftbares Item","Kleines Kit (Pistole/SMG): 8 Eisen + 50$","Mittleres Kit (Gewehr/Shotgun): 15 Eisen + 3 Gold + 100$","GroÃŸes Kit (Sniper/RPG): 25 Eisen + 8 Gold + 250$","NPC am Spawn der Kits verkauft (doppelter Preis) als Alternative"],
connect:"Reparatur braucht Eisen/Gold â†’ Bergarbeiter werden wichtig â†’ Handel entsteht â†’ Reparatur-Kits werden Handelsware."
},
{id:"l5",n:5,p:"hoch",t:"Daily Login Streak",c:"Retention Â· Woche 1",
why:"Spieler brauchen einen Grund, jeden Tag zu kommen. Nicht nur einmal, sondern dauerhaft. Streak belohnt Treue ohne Pay-to-Win.",
todo:["Tag 1: 25$","Tag 3: 75$ + 5 Pistolen-Muni","Tag 7: 150$ + kleines Reparatur-Kit","Tag 14: 300$ + 20 Gewehr-Muni","Tag 30: 500$ + mittleres Reparatur-Kit","Tag 60+: Wiederholung ab Tag 7 Rewards","Bei Verpassung: Streak pausiert fÃ¼r 3 Tage, dann Reset"],
connect:"Daily Streak â†’ tÃ¤glicher Login â†’ Spieler sehen andere online â†’ spontane Interaktion â†’ Bindung entsteht."
},
{id:"l6",n:6,p:"hoch",t:"Airdrops aktivieren",c:"Events Â· Woche 1",
why:"Airdrops bringen Spieler zusammen ohne feste Event-Zeiten. Organisches PvP, Spannung, Grund online zu bleiben.",
todo:["Standard-Drop: Alle 2-3h wenn 3+ Spieler online","Inhalt: 100-300$, 2-3 Magazine verschiedene Muni, 1 Reparatur-Kit (50% Chance)","AnkÃ¼ndigung: 3 Minuten vorher mit Koordinaten im Chat","Am Drop: 5-10 Zombies spawnen (PvE-Element)","Seltener Drop (1x tÃ¤glich, abends): Besserer Loot + garantiertes Kit"],
connect:"Airdrops â†’ Spieler treffen sich â†’ PvP oder Kooperation â†’ Geschichten entstehen â†’ RivalitÃ¤ten bilden sich."
},
{id:"l7",n:7,p:"hoch",t:"Schwarzmarkt-NPC einrichten",c:"Wirtschaft Â· Woche 1",
why:"Fester Shop ist langweilig. Wechselndes Angebot erzeugt FOMO und gibt Grund, mehrmals tÃ¤glich einzuloggen.",
todo:["NPC an verstecktem Ort (Keller, HÃ¶hle) oder nur nachts sichtbar","Angebot wechselt alle 4 Stunden","4-6 Items pro Rotation aus Pool von 30+","Beispiel-Pool: Seltene Muni, Speed-DÃ¼nger, Reparatur-Kits, Spezial-Samen, Enchant-BÃ¼cher","Hohe Preise: 200-800$ pro Item","Timer sichtbar: 'NÃ¤chste Lieferung in X:XX'"],
connect:"Schwarzmarkt â†’ Spieler checken regelmÃ¤ÃŸig â†’ mehr Online-Zeit â†’ mehr Interaktion â†’ 'Hast du gesehen was der Dealer hat?'"
},
{id:"l8",n:8,p:"med",t:"Clan-Tresor System",c:"Clans Â· Woche 2",
why:"Clans haben aktuell keinen echten Zweck. Ein Tresor gibt Grund zusammenzuarbeiten UND erzeugt Clan-RivalitÃ¤t.",
todo:["Jeder Clan hat einen Tresor (Clan-Bank erweitern)","TÃ¤glich Mitternacht: 30$ pro Mitglied das an dem Tag online war wird eingezahlt","Clan-Mitglieder kÃ¶nnen einzahlen, nur Leader kann auszahlen","Andere Clans kÃ¶nnen Ã¼berfallen wenn <2 Mitglieder online","Ãœberfall: 30 Sekunden 'Hacken', wÃ¤hrenddessen Alarm an alle Clan-Mitglieder","Erfolg: 40% vom Tresor-Inhalt","Cooldown: Gleicher Clan erst nach 48h wieder Ã¼berfallbar"],
connect:"Clan-Tresor â†’ Grund fÃ¼r Clan-Mitgliedschaft â†’ Clan-RivalitÃ¤t durch ÃœberfÃ¤lle â†’ 'Wir mÃ¼ssen online sein um unseren Tresor zu schÃ¼tzen'."
},
{id:"l9",n:9,p:"med",t:"Kopfgeld-System (Bounty)",c:"PvP Â· Woche 2",
why:"Spieler-getriebenes PvP. Erzeugt Geschichten, RivalitÃ¤ten, GrÃ¼nde jemanden zu jagen.",
todo:["/bounty set [spieler] [betrag] - Kopfgeld setzen (min 100$)","Kopfgelder stapeln von mehreren Spielern","Ab 500$ Gesamtbounty: Server-Broadcast alle 30 Min","Tafel am Spawn: Top 10 Kopfgelder mit BetrÃ¤gen","Killer erhÃ¤lt gesamtes Kopfgeld","Kopfgeld verfÃ¤llt nach 7 Tagen (50% zurÃ¼ck an Setzer)"],
connect:"Bounty â†’ Jagd auf Spieler â†’ Gejagter braucht Schutz â†’ Clan wird wichtiger â†’ Drama und Geschichten."
},
{id:"l10",n:10,p:"med",t:"Claim-Wartungskosten aktivieren",c:"Wirtschaft Â· Woche 2",
why:"Aktuell: Einmal claimen, fÃ¼r immer behalten. Inaktive Spieler blockieren Land. Keine laufenden Kosten = kein Grund aktiv zu bleiben.",
todo:["Wartung aktivieren (Code existiert bereits in deiner DB!)","Kosten: 10$/Tag pro Chunk","7 Tage Schonfrist bei Nicht-Zahlung","Dann: Claim wird aufgelÃ¶st, Land frei","Bei Login: Nachricht 'Deine Claims kosten X$/Tag. Guthaben: Y Tage'","Premium-RÃ¤nge: 50% reduzierte Wartung"],
connect:"Wartungskosten â†’ muss regelmÃ¤ÃŸig farmen â†’ bleibt aktiv â†’ sieht andere Spieler â†’ Interaktion."
}
];

// =====================================================
// SYSTEME - Wie alles zusammenhÃ¤ngt
// =====================================================
const SYSTEME=[
{id:"sys-geld",icon:"ğŸ’°",title:"Geld-Kreislauf",desc:"Woher kommt Geld, wohin geht es?",
content:`
<div class="info"><p><b>Einnahmen (200-300$/h mÃ¶glich):</b></p></div>
<div class="flow">
<div class="flow-box"><div class="flow-icon">â›ï¸</div><div class="flow-title">Bergarbeiter</div><div class="flow-desc">Erze verkaufen, 80-120$/h</div></div>
<div class="flow-box"><div class="flow-icon">ğŸª“</div><div class="flow-title">HolzfÃ¤ller</div><div class="flow-desc">Holz verkaufen, 70-100$/h</div></div>
<div class="flow-box"><div class="flow-icon">ğŸ£</div><div class="flow-title">Fischer</div><div class="flow-desc">Fisch + Schrott, 60-90$/h</div></div>
<div class="flow-box"><div class="flow-icon">ğŸŒ¿</div><div class="flow-title">Cannabis</div><div class="flow-desc">Verkauf an NPC, 50-150$/h</div></div>
<div class="flow-box"><div class="flow-icon">ğŸ’€</div><div class="flow-title">PvP Kills</div><div class="flow-desc">20% vom Opfer-Bargeld</div></div>
</div>
<div class="warn-box"><p><b>Ausgaben (hÃ¤lt Wirtschaft am Laufen):</b></p></div>
<div class="flow">
<div class="flow-box"><div class="flow-icon">ğŸ”«</div><div class="flow-title">Munition</div><div class="flow-desc">0.50$ - 25$ pro Mag</div></div>
<div class="flow-box"><div class="flow-icon">ğŸ”§</div><div class="flow-title">Reparatur</div><div class="flow-desc">50$ - 250$ pro Kit</div></div>
<div class="flow-box"><div class="flow-icon">ğŸ </div><div class="flow-title">Claim-Wartung</div><div class="flow-desc">10$/Tag pro Chunk</div></div>
<div class="flow-box"><div class="flow-icon">ğŸ•¶ï¸</div><div class="flow-title">Schwarzmarkt</div><div class="flow-desc">200-800$ fÃ¼r Seltenes</div></div>
<div class="flow-box"><div class="flow-icon">ğŸ¯</div><div class="flow-title">Bounty setzen</div><div class="flow-desc">Min 100$ pro Kopfgeld</div></div>
</div>
`},
{id:"sys-jobs",icon:"âš’ï¸",title:"Job-AbhÃ¤ngigkeiten",desc:"Warum Spieler sich gegenseitig brauchen",
content:`
<div class="info"><p><b>Aktuell:</b> Jeder Job = nur Geld verdienen. Keine Interaktion nÃ¶tig.</p></div>
<div class="info"><p><b>Ziel:</b> Jobs produzieren unterschiedliche Dinge, die andere brauchen.</p></div>
<div class="flow">
<div class="flow-box"><div class="flow-icon">â›ï¸</div><div class="flow-title">Bergarbeiter</div><div class="flow-desc">Liefert: Eisen, Gold, Redstone<br><br>Gebraucht fÃ¼r: Reparatur-Kits, Waffen-Crafting (Zukunft)</div></div>
<div class="flow-box"><div class="flow-icon">ğŸª“</div><div class="flow-title">HolzfÃ¤ller</div><div class="flow-desc">Liefert: Holz, StÃ¶cke, Kohle<br><br>Gebraucht fÃ¼r: Kessel, Trockengestelle, Werkzeuge</div></div>
<div class="flow-box"><div class="flow-icon">ğŸ£</div><div class="flow-title">Fischer</div><div class="flow-desc">Liefert: Fisch, Schrott, Flaschen, Algen<br><br>Gebraucht fÃ¼r: Essen, DÃ¼nger, TrÃ¤nke</div></div>
</div>
<div class="craft">
<div class="craft-title">Beispiel: Reparatur-Kit (mittel)</div>
<div class="craft-recipe">
<span class="craft-item">15 Eisen (Bergarbeiter)</span>
<span class="craft-item">3 Gold (Bergarbeiter)</span>
<span class="craft-item">100$</span>
<span class="craft-arrow">â†’</span>
<span class="craft-result">Mittleres Rep-Kit</span>
</div>
</div>
<div class="craft">
<div class="craft-title">Beispiel: Speed-DÃ¼nger</div>
<div class="craft-recipe">
<span class="craft-item">5 Algen (Fischer)</span>
<span class="craft-item">3 Redstone (Bergarbeiter)</span>
<span class="craft-arrow">â†’</span>
<span class="craft-result">Speed-DÃ¼nger (2x Wachstum)</span>
</div>
</div>
`},
{id:"sys-clan",icon:"âš”ï¸",title:"Clan-System",desc:"Warum Clans wichtig sind",
content:`
<div class="info"><p><b>Problem:</b> Clans sind nur ein Chat und ein Tag. Kein Grund beizutreten.</p></div>
<div class="flow">
<div class="flow-box"><div class="flow-icon">ğŸ¦</div><div class="flow-title">Clan-Tresor</div><div class="flow-desc">Automatisch 30$/Tag pro aktivem Mitglied. Kann Ã¼berfallen werden.</div></div>
<div class="flow-box"><div class="flow-icon">ğŸ›¡ï¸</div><div class="flow-title">Schutz</div><div class="flow-desc">Tresor sicher wenn 2+ Mitglieder online. Alarm bei Ãœberfall.</div></div>
<div class="flow-box"><div class="flow-icon">âš”ï¸</div><div class="flow-title">ÃœberfÃ¤lle</div><div class="flow-desc">Andere Clan-Tresore hacken. 30 Sek Hackzeit, 40% Beute.</div></div>
<div class="flow-box"><div class="flow-icon">ğŸ‘¥</div><div class="flow-title">Teamwork</div><div class="flow-desc">Zusammen farmen, Airdrops holen, Basen verteidigen.</div></div>
</div>
<div class="warn-box"><p><b>Gameplay-Loop:</b> Clan bilden â†’ Tresor fÃ¼llen â†’ Online sein um zu schÃ¼tzen â†’ Andere Ã¼berfallen â†’ RivalitÃ¤t entsteht â†’ Drama â†’ Spieler bleiben.</p></div>
`},
{id:"sys-pvp",icon:"ğŸ’€",title:"PvP-Ã–kosystem",desc:"Warum PvP Sinn macht",
content:`
<div class="info"><p><b>Aktuell:</b> PvP = Griefing. Killer gewinnt nichts, Opfer verliert alles. Frustrierend fÃ¼r beide.</p></div>
<div class="warn-box"><p><b>Neu:</b> PvP hat Kosten (Muni) UND Belohnungen (Geld, Items). Jeder Kampf ist eine Entscheidung.</p></div>
<div class="flow">
<div class="flow-box"><div class="flow-icon">ğŸ’°</div><div class="flow-title">Kill-Reward</div><div class="flow-desc">20% vom Bargeld des Opfers (umverteilt, nicht generiert)</div></div>
<div class="flow-box"><div class="flow-icon">ğŸ’</div><div class="flow-title">Item-Chance</div><div class="flow-desc">10% Chance pro Slot, zufÃ¤lliges Item zu droppen</div></div>
<div class="flow-box"><div class="flow-icon">ğŸ”«</div><div class="flow-title">Muni-Kosten</div><div class="flow-desc">Jeder Schuss kostet. KÃ¤mpfen ist nicht gratis.</div></div>
<div class="flow-box"><div class="flow-icon">ğŸ¯</div><div class="flow-title">Bounty</div><div class="flow-desc">Kopfgeld fÃ¼r extra Motivation</div></div>
</div>
<div class="craft">
<div class="craft-title">Anti-Abuse MaÃŸnahmen</div>
<div class="craft-recipe">
<span class="craft-item">Gleicher Spieler: 2h Cooldown</span>
<span class="craft-item">Unter 50$: Kein Geld-Loot</span>
<span class="craft-item">Kill-Log fÃ¼r Admins</span>
</div>
</div>
`},
{id:"sys-drogen",icon:"ğŸŒ¿",title:"Drogen-System",desc:"Cannabis mit Tiefe",
content:`
<div class="info"><p><b>Aktuell:</b> Anbauen â†’ Trocknen â†’ Verkaufen. Langweilig, kein Risiko, alle machen dasselbe.</p></div>
<div class="flow">
<div class="flow-box"><div class="flow-icon">ğŸŒ±</div><div class="flow-title">1. Samen kaufen</div><div class="flow-desc">Dealer verkauft verschiedene Sorten zu unterschiedlichen Preisen</div></div>
<div class="flow-box"><div class="flow-icon">ğŸ’§</div><div class="flow-title">2. Anbauen</div><div class="flow-desc">Kessel + Wasser. Optional: DÃ¼nger fÃ¼r schnelleres Wachstum</div></div>
<div class="flow-box"><div class="flow-icon">ğŸ”¥</div><div class="flow-title">3. Trocknen</div><div class="flow-desc">Trockengestell (HolzfÃ¤ller craftet)</div></div>
<div class="flow-box"><div class="flow-icon">ğŸ“¦</div><div class="flow-title">4. Verarbeiten</div><div class="flow-desc">Verkaufen ODER konsumieren fÃ¼r Buffs</div></div>
</div>
<div class="craft">
<div class="craft-title">Konsum-Effekte (NEU)</div>
<div class="craft-recipe">
<span class="craft-item">Standard-Cannabis</span>
<span class="craft-arrow">â†’</span>
<span class="craft-result">Speed I + StÃ¤rke I (45 Sek)</span>
</div>
</div>
<div class="craft">
<div class="craft-title">Premium-Cannabis (mit Speed-DÃ¼nger)</div>
<div class="craft-recipe">
<span class="craft-item">Premium-Cannabis</span>
<span class="craft-arrow">â†’</span>
<span class="craft-result">Speed II + StÃ¤rke I + Resistenz I (60 Sek)</span>
</div>
</div>
<div class="warn-box"><p><b>Gameplay:</b> Spieler mÃ¼ssen entscheiden: Verkaufen fÃ¼r Geld ODER behalten fÃ¼r PvP-Vorteil. DÃ¼nger braucht Fischer-Algen + Bergarbeiter-Redstone â†’ Job-Verbindung.</p></div>
`}
];

// =====================================================
// PREISE / WIRTSCHAFT
// =====================================================
const PREISE={
muni:{t:"ğŸ”« Munition",n:"Beim MunitionshÃ¤ndler",i:[
{a:"Pistolen-Magazin (30)",b:"0.50$",c:"GÃ¼nstig"},
{a:"SMG-Magazin (40)",b:"1.00$",c:""},
{a:"Gewehr-Magazin (30)",b:"2.00$",c:"Standard"},
{a:"Shotgun-Patronen (16)",b:"1.50$",c:""},
{a:"Sniper-Magazin (8)",b:"5.00$",c:"PrÃ¤zision"},
{a:"RPG-Rakete (1)",b:"25.00$",c:"Teuer"},
{a:"Granate (1)",b:"8.00$",c:""}
]},
rep:{t:"ğŸ”§ Reparatur-Kits",n:"Crafting oder NPC (2x Preis)",i:[
{a:"Kleines Kit (Pistole/SMG)",b:"8 Eisen + 50$",c:"Crafting"},
{a:"Kleines Kit (NPC)",b:"100$",c:"Bequem"},
{a:"Mittleres Kit (Gewehr/Shotgun)",b:"15 Eisen + 3 Gold + 100$",c:"Crafting"},
{a:"Mittleres Kit (NPC)",b:"200$",c:"Bequem"},
{a:"GroÃŸes Kit (Sniper/RPG)",b:"25 Eisen + 8 Gold + 250$",c:"Crafting"},
{a:"GroÃŸes Kit (NPC)",b:"500$",c:"Bequem"}
]},
daily:{t:"ğŸ”¥ Daily Streak",n:"Automatisch bei Login",i:[
{a:"Tag 1",b:"25$",c:""},
{a:"Tag 3",b:"75$ + 5 Pistolen-Muni",c:""},
{a:"Tag 7",b:"150$ + Kleines Rep-Kit",c:""},
{a:"Tag 14",b:"300$ + 20 Gewehr-Muni",c:""},
{a:"Tag 30",b:"500$ + Mittleres Rep-Kit",c:""},
{a:"Tag 60+",b:"Wiederholt ab Tag 7",c:"Kein Titel-Spam"}
]},
drops:{t:"ğŸ“¦ Airdrops",n:"Alle 2-3h wenn 3+ online",i:[
{a:"Standard-Drop",b:"100-300$ + 2-3 Magazine + 50% Kit",c:"RegelmÃ¤ÃŸig"},
{a:"Seltener Drop (1x/Tag)",b:"400-600$ + 5 Magazine + Kit",c:"Abends"},
{a:"Zombies am Drop",b:"5-10 StÃ¼ck",c:"PvE Element"}
]},
kills:{t:"ğŸ’€ Kill-Rewards",n:"Umverteilung, keine Generierung",i:[
{a:"Geld vom Opfer",b:"20% vom Bargeld",c:"Min 50$ beim Opfer"},
{a:"Item-Drop",b:"10% Chance pro Slot",c:"ZufÃ¤lliges Item"},
{a:"Anti-Abuse",b:"2h Cooldown",c:"Gleicher Spieler"}
]},
claim:{t:"ğŸ  Claim-Wartung",n:"TÃ¤glich abgezogen",i:[
{a:"Pro Chunk",b:"10$/Tag",c:""},
{a:"Premium-Rang",b:"5$/Tag",c:"50% Rabatt"},
{a:"Schonfrist",b:"7 Tage",c:"Bei Nicht-Zahlung"},
{a:"Danach",b:"Claim aufgelÃ¶st",c:"Land frei"}
]},
clan:{t:"âš”ï¸ Clan-Tresor",n:"Automatisch + ÃœberfÃ¤lle",i:[
{a:"TÃ¤gliche Einzahlung",b:"30$ pro aktives Mitglied",c:"Automatisch"},
{a:"Ãœberfall mÃ¶glich",b:"Wenn <2 online",c:"30 Sek Hackzeit"},
{a:"Ãœberfall-Beute",b:"40% vom Tresor",c:""},
{a:"Cooldown",b:"48h",c:"Gleicher Clan"}
]},
schwarzmarkt:{t:"ğŸ•¶ï¸ Schwarzmarkt",n:"Wechselt alle 4h",i:[
{a:"Seltene Muni (Leuchtspurmunition)",b:"150-300$",c:"Kosmetisch"},
{a:"Speed-DÃ¼nger",b:"200-400$",c:"2x Wachstum"},
{a:"Reparatur-Kit (groÃŸ)",b:"400-600$",c:"GÃ¼nstiger als NPC"},
{a:"Premium-Samen",b:"300-500$",c:"Bessere Effekte"},
{a:"Enchant-Buch",b:"500-800$",c:"ZufÃ¤llig"}
]}
};

// =====================================================
// ZUKUNFT - SpÃ¤ter umsetzen
// =====================================================
const ZUKUNFT=[
{id:"z1",icon:"ğŸ”©",title:"Waffenteile-System",prio:"Hoch",
desc:"Waffen nicht mehr nur aus Crates, sondern aus Teilen craften.",
details:`
<p><b>Waffenteile:</b></p>
<div class="flow">
<div class="flow-box"><div class="flow-icon">ğŸ”©</div><div class="flow-title">Lauf</div><div class="flow-desc">Drop von Zombies (5%)</div></div>
<div class="flow-box"><div class="flow-icon">ğŸªµ</div><div class="flow-title">Griff</div><div class="flow-desc">HolzfÃ¤ller craftet (15 Holz)</div></div>
<div class="flow-box"><div class="flow-icon">âš™ï¸</div><div class="flow-title">Mechanik</div><div class="flow-desc">Bergarbeiter craftet (10 Eisen + 3 Redstone)</div></div>
<div class="flow-box"><div class="flow-icon">ğŸ“¦</div><div class="flow-title">Magazinhalter</div><div class="flow-desc">Fischer findet (3% beim Angeln)</div></div>
</div>
<div class="craft">
<div class="craft-title">Pistole craften</div>
<div class="craft-recipe">
<span class="craft-item">1 Lauf</span>
<span class="craft-item">1 Griff</span>
<span class="craft-item">1 Mechanik</span>
<span class="craft-arrow">â†’</span>
<span class="craft-result">Pistole</span>
</div>
</div>
<div class="craft">
<div class="craft-title">Gewehr craften</div>
<div class="craft-recipe">
<span class="craft-item">2 LÃ¤ufe</span>
<span class="craft-item">1 Griff</span>
<span class="craft-item">2 Mechanik</span>
<span class="craft-item">1 Magazinhalter</span>
<span class="craft-arrow">â†’</span>
<span class="craft-result">Gewehr</span>
</div>
</div>
<p style="margin-top:.5rem;font-size:.6rem;color:var(--text-m)"><b>Vorteil:</b> Alle Jobs werden gebraucht. Waffen haben echten Wert. Crates bleiben fÃ¼r seltene/bessere Versionen.</p>
`},
{id:"z2",icon:"ğŸ‘¹",title:"Boss-System",prio:"Mittel",
desc:"WÃ¶chentliche Bosse mit gutem Loot. Braucht Gruppe.",
details:`
<div class="flow">
<div class="flow-box"><div class="flow-icon">ğŸ’€</div><div class="flow-title">Zombie-KÃ¶nig</div><div class="flow-desc">Spawnt Sonntag 20 Uhr. 500 HP. Braucht 3-5 Spieler.</div></div>
<div class="flow-box"><div class="flow-icon">ğŸ</div><div class="flow-title">Loot</div><div class="flow-desc">Waffenteile, seltene Muni, Reparatur-Kits, 500-1000$</div></div>
</div>
<p style="margin-top:.5rem;font-size:.6rem;color:var(--text-m)"><b>Vorteil:</b> WÃ¶chentlicher HÃ¶hepunkt. Kooperation nÃ¶tig. Clans organisieren sich.</p>
`},
{id:"z3",icon:"ğŸ¦",title:"BankÃ¼berfall (Clan-Event)",prio:"Mittel",
desc:"Clans kÃ¶nnen die Server-Bank Ã¼berfallen. GroÃŸes Risiko, groÃŸer Loot.",
details:`
<p><b>Ablauf:</b></p>
<div class="flow">
<div class="flow-box"><div class="flow-icon">1ï¸âƒ£</div><div class="flow-title">Clan startet Ãœberfall</div><div class="flow-desc">/clanbank rob - Kostet 500$ StartgebÃ¼hr</div></div>
<div class="flow-box"><div class="flow-icon">2ï¸âƒ£</div><div class="flow-title">Server-Broadcast</div><div class="flow-desc">"Clan X Ã¼berfÃ¤llt die Bank!" - Alle wissen Bescheid</div></div>
<div class="flow-box"><div class="flow-icon">3ï¸âƒ£</div><div class="flow-title">5 Minuten Hackzeit</div><div class="flow-desc">Clan muss Bank verteidigen wÃ¤hrend Timer lÃ¤uft</div></div>
<div class="flow-box"><div class="flow-icon">4ï¸âƒ£</div><div class="flow-title">Loot oder Tod</div><div class="flow-desc">Erfolg: 2000-5000$ + Items. Fail: Alles verloren.</div></div>
</div>
<p style="margin-top:.5rem;font-size:.6rem;color:var(--text-m)"><b>Cooldown:</b> 24h server-weit. Max 1 Ãœberfall pro Tag.</p>
`},
{id:"z4",icon:"ğŸ§ª",title:"Chemiker-Job",prio:"Niedrig",
desc:"Neuer Job: Veredelt Drogen, craftet TrÃ¤nke, stellt Sprengstoffe her.",
details:`
<p><b>FÃ¤higkeiten:</b></p>
<div class="flow">
<div class="flow-box"><div class="flow-icon">ğŸŒ¿</div><div class="flow-title">Drogen veredeln</div><div class="flow-desc">Aus Standard-Cannabis wird Premium</div></div>
<div class="flow-box"><div class="flow-icon">âš—ï¸</div><div class="flow-title">TrÃ¤nke brauen</div><div class="flow-desc">Heilung, Speed, StÃ¤rke</div></div>
<div class="flow-box"><div class="flow-icon">ğŸ’£</div><div class="flow-title">Sprengstoffe</div><div class="flow-desc">FÃ¼r Clan-ÃœberfÃ¤lle, TÃ¼ren sprengen</div></div>
</div>
<p style="margin-top:.5rem;font-size:.6rem;color:var(--text-m)"><b>Freischaltung:</b> Level 30 in einem anderen Job erreichen.</p>
`},
{id:"z5",icon:"ğŸ†",title:"Ranglisten-System",prio:"Niedrig",
desc:"Sichtbare Rankings motivieren Wettbewerb.",
details:`
<div class="flow">
<div class="flow-box"><div class="flow-icon">ğŸ’°</div><div class="flow-title">Reichste Spieler</div><div class="flow-desc">Top 10 nach Bargeld</div></div>
<div class="flow-box"><div class="flow-icon">ğŸ’€</div><div class="flow-title">Top Killer</div><div class="flow-desc">Meiste PvP-Kills diese Woche</div></div>
<div class="flow-box"><div class="flow-icon">âš’ï¸</div><div class="flow-title">Top Farmer</div><div class="flow-desc">Meiste Job-XP diese Woche</div></div>
<div class="flow-box"><div class="flow-icon">âš”ï¸</div><div class="flow-title">Beste Clans</div><div class="flow-desc">Nach Tresor-Inhalt + AktivitÃ¤t</div></div>
</div>
<p style="margin-top:.5rem;font-size:.6rem;color:var(--text-m)"><b>Anzeige:</b> Hologramme am Spawn, /top Befehl, Website.</p>
`}
];

// =====================================================
// STATUS
// =====================================================
const STATUS=[
{e:"âš’ï¸",t:"Jobs",s:"ok",d:"3 Jobs funktionieren. Level-System, Enchants, Geld-Verdienst. Fehlt: AbhÃ¤ngigkeiten zwischen Jobs.",tags:["ok:3 Jobs","ok:Enchants","warn:Keine AbhÃ¤ngigkeiten"]},
{e:"ğŸ”«",t:"Waffen",s:"bad",d:"21 Waffen existieren. ABER: Keine Muni-Quelle fÃ¼r Spieler, keine Reparatur mÃ¶glich. System ist fÃ¼r Spieler nutzlos.",tags:["ok:21 Waffen","bad:Keine Muni","bad:Keine Reparatur"]},
{e:"ğŸ°",t:"Crates",s:"ok",d:"Waffenkiste funktioniert. Fragment-System (3% von Zombies). Gut.",tags:["ok:Funktioniert","ok:Fragmente"]},
{e:"ğŸŒ¿",t:"Cannabis",s:"warn",d:"Anbau funktioniert. Dealer verkauft Samen. Fehlt: Konsum-Effekte, verschiedene Sorten.",tags:["ok:Anbau","ok:Dealer","warn:Kein Konsum"]},
{e:"âš”ï¸",t:"Clans",s:"warn",d:"Clans existieren, Clan-Bank existiert. ABER: Upkeep deaktiviert, kein Zweck fÃ¼r Clans, keine Wars.",tags:["ok:Clan-Bank","warn:Kein Upkeep","warn:Kein Zweck"]},
{e:"ğŸ ",t:"Claims",s:"warn",d:"Chunk-Claiming funktioniert. ABER: Keine Wartungskosten. Inaktive Spieler blockieren Land ewig.",tags:["ok:Claiming","warn:Keine Wartung"]},
{e:"ğŸ’€",t:"PvP",s:"bad",d:"Combat-Tag funktioniert, Full-Loot aktiv. ABER: Kein Kill-Reward, kein Bounty. PvP = reines Griefing.",tags:["ok:Combat-Tag","ok:Full-Loot","bad:Kein Reward","bad:Kein Bounty"]},
{e:"ğŸ“±",t:"Sonstiges",s:"ok",d:"Handy-GUI, NPCs, Rucksack, Tutorial, RÃ¤nge - alles solide Basis.",tags:["ok:Solide Basis"]}
];

// =====================================================
// SPIELERREISE
// =====================================================
const REISE=[
{n:1,t:"Ankunft",ti:"Minute 0-30",g:"Server verstehen, Ã¼berleben, erste Waffe",
tx:"Spieler spawnt in Survival-Welt (kein Starthaus!). Starter-Kit hilft beim Ãœberleben. Tutorial erklÃ¤rt Basics. Ziel: Nicht sterben, ersten Zombie tÃ¶ten, System verstehen.",
ck:[{t:"Spawnt in Survival (nicht Starthaus)",k:"r1a"},{t:"Starter-Kit funktioniert",k:"r1b"},{t:"Tutorial erklÃ¤rt Basics",k:"r1c"},{t:"Kann Waffe bekommen (Shop/Drop)",k:"r1d"}]},
{n:2,t:"Aufbau",ti:"Tag 1-3",g:"Base bauen, Job leveln, Geld verdienen",
tx:"Chunk claimen, Base bauen, Job wÃ¤hlen und farmen. Erste Cannabis-Ernte. Genug Geld fÃ¼r Muni und Basics. Erster Kontakt mit anderen Spielern.",
ck:[{t:"Claim-System verstÃ¤ndlich",k:"r2a"},{t:"Job gibt 200-300$/h",k:"r2b"},{t:"Cannabis funktioniert",k:"r2c"},{t:"Kann Muni kaufen",k:"r2d"}]},
{n:3,t:"Etablierung",ti:"Tag 3-7",g:"Enchants, Clan, Nische finden",
tx:"KRITISCHE PHASE - hier gehen die meisten! Braucht: Neuen Content (Airdrops, Schwarzmarkt), soziale Bindung (Clan), nÃ¤chstes Ziel (Enchants, bessere Waffen).",
ck:[{t:"Custom Enchants verfÃ¼gbar",k:"r3a"},{t:"Airdrops bringen Spieler zusammen",k:"r3b"},{t:"Schwarzmarkt gibt Login-Grund",k:"r3c"},{t:"Clan-Einladung erhalten",k:"r3d"}]},
{n:4,t:"Langzeit",ti:"Woche 2+",g:"RivalitÃ¤ten, tÃ¤gliche GrÃ¼nde, Ziele",
tx:"Hier stirbt dein Server aktuell! Braucht: Kill-Rewards fÃ¼r PvP-Anreiz, Bounty fÃ¼r Drama, Clan-Tresor fÃ¼r Gruppenspiel, Wartungskosten um aktiv zu bleiben.",
ck:[{t:"Kill-Rewards motivieren PvP",k:"r4a"},{t:"Bounty-System erzeugt RivalitÃ¤ten",k:"r4b"},{t:"Clan-Tresor gibt Clan-Zweck",k:"r4c"},{t:"Wartungskosten halten aktiv",k:"r4d"}]}
];

// =====================================================
// AUTH & STATE
// =====================================================
function login(){
  const b=$('lb');b.disabled=true;b.innerHTML='<span class="spinner"></span>';$('lerr').textContent='';
  auth.signInWithEmailAndPassword($('le').value,$('lp').value).catch(e=>{
    $('lerr').textContent='âŒ Fehler';b.disabled=false;b.textContent='Anmelden';
  });
}
function guest(){user='Gast';admin=false;enter()}
function logout(){auth.signOut();location.reload()}
auth.onAuthStateChanged(u=>{if(u){user=u.email.split('@')[0];admin=true;enter()}});

function enter(){
  $('lo').classList.add('h');$('app').style.display='block';$('top').style.display='flex';
  $('badge').textContent=admin?'ADMIN':'GAST';
  $('badge').className='top-badge '+(admin?'admin':'guest');
  $('ebtn').style.display=admin?'inline':'none';
  load();
}

async function load(){
  $('sync').innerHTML='<span class="spinner"></span>';
  try{
    const d=await db.collection('mp2').doc('state').get();
    if(d.exists)S={done:{},checks:{},open:{},del:[],...d.data()};
    $('sync').innerHTML='<span class="dot"></span>';
  }catch(e){$('sync').innerHTML='âš ï¸'}
  render();
}

async function save(){try{await db.collection('mp2').doc('state').set(S)}catch(e){}}
db.collection('mp2').doc('state').onSnapshot(d=>{if(d.exists){S={done:{},checks:{},open:{},del:[],...d.data()};render()}});

function toggleEdit(){
  edit=!edit;
  document.body.classList.toggle('edit',edit);
  $('ebar').classList.toggle('show',edit);
  $('ebtn').textContent=edit?'ğŸ‘ï¸ Ansicht':'âœï¸ Edit';
}

function toast(m,err){
  const t=$('toast');t.textContent=m;
  t.className='toast show'+(err?' err':'');
  setTimeout(()=>t.className='toast',1800);
}

// =====================================================
// RENDER
// =====================================================
function render(){
  const r=$('root');
  r.innerHTML=rLeit()+rSysteme()+rPreise()+rZukunft()+rReise()+rStatus();
  document.querySelectorAll('.sec').forEach(s=>s.classList.toggle('on',s.dataset.s===tab));
  prog();bindEvents();
}

function rLeit(){
  const items=LEIT.filter(l=>!S.del.includes(l.id));
  return `<div class="sec on" data-s="leitfaden">
    <div class="sec-title">ğŸ“‹ Jetzt umsetzen</div>
    <p class="sec-desc">Diese Schritte in dieser Reihenfolge. Kritisch (rot) zuerst, dann Hoch (orange), dann Medium (blau).</p>
    <div class="info"><p><b>Ziel:</b> Spieler gewinnen UND langfristig halten. Jeder Schritt lÃ¶st ein konkretes Problem und verbindet sich mit anderen Systemen.</p></div>
    ${items.map(l=>{
      const done=S.done[l.id],open=S.open[l.id];
      return `<div class="step${done?' done':''}" data-id="${l.id}">
        <div class="step-h">
          <div class="step-n ${l.p}">${done?'âœ“':l.n}</div>
          <div class="step-info">
            <div class="step-t">${l.t}</div>
            <div class="step-c">${l.c}</div>
          </div>
          <div class="step-chk${done?' on':''}" data-done="${l.id}">${done?'âœ“':''}</div>
          <button class="step-del" data-del="${l.id}">âœ•</button>
          <span class="step-arr">${open?'â–²':'â–¼'}</span>
        </div>
        <div class="step-body${open?' open':''}">
          <div class="step-content">
            <div class="step-why"><b>âš ï¸ WARUM?</b><p>${l.why}</p></div>
            <div class="step-todo"><b>âœ… TO-DO</b>${l.todo.map(t=>`<div class="todo-i">${t}</div>`).join('')}</div>
            ${l.connect?`<div class="step-connect"><b>ğŸ”— VERBINDUNG</b><p>${l.connect}</p></div>`:''}
          </div>
        </div>
      </div>`;
    }).join('')}
  </div>`;
}

function rSysteme(){
  return `<div class="sec" data-s="systeme">
    <div class="sec-title">âš™ï¸ Wie alles zusammenhÃ¤ngt</div>
    <p class="sec-desc">Jedes System verbindet sich mit anderen. Das macht den Server interessant.</p>
    ${SYSTEME.map(s=>`
      <div class="card">
        <div class="card-h"><span>${s.icon}</span><h4>${s.title}</h4></div>
        <p>${s.desc}</p>
        ${s.content}
      </div>
    `).join('')}
  </div>`;
}

function rPreise(){
  return `<div class="sec" data-s="preise">
    <div class="sec-title">ğŸ’° Wirtschaft & Preise</div>
    <p class="sec-desc">Alle Preise basierend auf 200-300$/h Verdienst. Muni muss gÃ¼nstig sein!</p>
    ${Object.values(PREISE).map(p=>`
      <div class="tbl">
        <div class="tbl-h"><span>${p.t}</span><span>${p.n}</span></div>
        ${p.i.map(i=>`<div class="tbl-r"><span class="tbl-item">${i.a}</span><span class="tbl-val">${i.b}</span><span class="tbl-note">${i.c}</span></div>`).join('')}
      </div>
    `).join('')}
  </div>`;
}

function rZukunft(){
  return `<div class="sec" data-s="zukunft">
    <div class="sec-title">ğŸ”® Zukunft</div>
    <p class="sec-desc">Diese Features nach den Basics. Erst Fundament, dann Extras.</p>
    ${ZUKUNFT.map(z=>`
      <div class="card">
        <div class="card-h">
          <span>${z.icon}</span>
          <h4>${z.title}</h4>
          <span class="badge ${z.prio==='Hoch'?'warn':z.prio==='Mittel'?'ok':'badge'}">${z.prio}</span>
        </div>
        <p>${z.desc}</p>
        ${z.details}
      </div>
    `).join('')}
  </div>`;
}

function rReise(){
  return `<div class="sec" data-s="reise">
    <div class="sec-title">ğŸ—ºï¸ Spielerreise</div>
    <p class="sec-desc">So erlebt ein neuer Spieler deinen Server. Phase 3 und 4 sind kritisch!</p>
    <div class="tl">
      ${REISE.map(p=>{
        const allDone=p.ck.every(c=>S.checks[c.k]);
        return `<div class="ph${allDone?' done':''}">
          <div class="ph-dot">${allDone?'âœ“':p.n}</div>
          <div class="ph-card">
            <div class="ph-top"><span class="ph-t">${p.t}</span><span class="ph-time">${p.ti}</span></div>
            <div class="ph-goal">ğŸ¯ ${p.g}</div>
            <div class="ph-text">${p.tx}</div>
            ${p.ck.map(c=>{
              const on=S.checks[c.k];
              return `<label class="pchk${on?' on':''}" data-ck="${c.k}"><span class="pchk-box">${on?'âœ“':''}</span>${c.t}</label>`;
            }).join('')}
          </div>
        </div>`;
      }).join('')}
    </div>
  </div>`;
}

function rStatus(){
  const badge=s=>s==='ok'?'<span class="badge ok">âœ“ OK</span>':s==='warn'?'<span class="badge warn">â—</span>':'<span class="badge bad">âœ—</span>';
  return `<div class="sec" data-s="status">
    <div class="sec-title">ğŸ“Š Aktueller Status</div>
    <p class="sec-desc">Was funktioniert und was nicht auf deinem Server.</p>
    ${STATUS.map(s=>`
      <div class="card">
        <div class="card-h"><span>${s.e}</span><h4>${s.t}</h4>${badge(s.s)}</div>
        <p>${s.d}</p>
        <div class="tags">${s.tags.map(t=>`<span class="tag ${t.startsWith('ok')?'ok':t.startsWith('bad')?'bad':''}">${t.replace('ok:','âœ“ ').replace('warn:','â— ').replace('bad:','âœ— ')}</span>`).join('')}</div>
      </div>
    `).join('')}
  </div>`;
}

// =====================================================
// EVENTS
// =====================================================
function bindEvents(){
  // Step headers - GÃ¤ste kÃ¶nnen aufklappen, nur Admins speichern
  document.querySelectorAll('.step-h').forEach(h=>{
    h.onclick=e=>{
      if(e.target.classList.contains('step-chk')||e.target.classList.contains('step-del'))return;
      const id=h.parentElement.dataset.id;
      const body=h.nextElementSibling;
      body.classList.toggle('open');
      h.querySelector('.step-arr').textContent=body.classList.contains('open')?'â–²':'â–¼';
      if(admin){S.open[id]=body.classList.contains('open');save();}
    };
  });
  
  // Step checkboxes
  document.querySelectorAll('.step-chk').forEach(c=>{
    c.onclick=e=>{
      e.stopPropagation();
      if(!admin)return;
      const id=c.dataset.done;
      S.done[id]=!S.done[id];
      save();
      toast(S.done[id]?'âœ“ Erledigt':'ZurÃ¼ckgesetzt');
    };
  });
  
  // Step delete
  document.querySelectorAll('.step-del').forEach(d=>{
    d.onclick=e=>{
      e.stopPropagation();
      if(!admin)return;
      if(!confirm('Schritt wirklich lÃ¶schen?'))return;
      S.del.push(d.dataset.del);
      save();
      toast('GelÃ¶scht');
    };
  });
  
  // Phase checks
  document.querySelectorAll('.pchk').forEach(c=>{
    c.onclick=()=>{
      if(!admin)return;
      const k=c.dataset.ck;
      S.checks[k]=!S.checks[k];
      save();
    };
  });
  
  // Navigation
  document.querySelectorAll('.nav-btn').forEach(b=>{
    b.onclick=()=>{
      tab=b.dataset.t;
      document.querySelectorAll('.nav-btn').forEach(x=>x.classList.remove('on'));
      b.classList.add('on');
      document.querySelectorAll('.sec').forEach(s=>s.classList.toggle('on',s.dataset.s===tab));
    };
  });
}

function prog(){
  const steps=LEIT.filter(l=>!S.del.includes(l.id));
  const checks=REISE.reduce((a,p)=>a+p.ck.length,0);
  const total=steps.length+checks;
  const doneSteps=steps.filter(s=>S.done[s.id]).length;
  const doneChecks=Object.keys(S.checks).filter(k=>S.checks[k]).length;
  const done=doneSteps+doneChecks;
  const pct=total?Math.round(done/total*100):0;
  
  $('pct').textContent=pct+'%';
  $('fill').style.width=pct+'%';
  $('pdone').textContent=done;
  $('ptotal').textContent=total;
}

// Init
$('lp').onkeydown=e=>{if(e.key==='Enter')login()};
render();
</script>
</body>
</html>
>{
    b.onclick=()=>{
      tab=b.dataset.t;
      document.querySelectorAll('.nav-btn').forEach(x=>x.classList.remove('on'));
      b.classList.add('on');
      document.querySelectorAll('.sec').forEach(s=>s.classList.toggle('on',s.dataset.s===tab));
    };
  });
}

function prog(){
  const steps=LEIT.filter(l=>!S.del.includes(l.id));
  const checks=REISE.reduce((a,p)=>a+p.ck.length,0);
  const total=steps.length+checks;
  const doneSteps=steps.filter(s=>S.done[s.id]).length;
  const doneChecks=Object.keys(S.checks).filter(k=>S.checks[k]).length;
  const done=doneSteps+doneChecks;
  const pct=total?Math.round(done/total*100):0;
  
  $('pct').textContent=pct+'%';
  $('fill').style.width=pct+'%';
  $('pdone').textContent=done;
  $('ptotal').textContent=total;
}

// Init
$('lp').onkeydown=e=>{if(e.key==='Enter')login()};
render();
</script>
</body>
</html>
